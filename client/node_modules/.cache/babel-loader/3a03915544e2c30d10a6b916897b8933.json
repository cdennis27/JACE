{"ast":null,"code":"import _objectSpread from\"C:/Users/joshu/Desktop/project3/JACE/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/joshu/Desktop/project3/JACE/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{Link}from\"react-router-dom\";import{pluralize}from\"../../utils/helpers\";import{useStoreContext}from\"../../utils/GlobalState\";import{ADD_TO_CART,UPDATE_CART_QUANTITY}from\"../../utils/actions\";import{idbPromise}from\"../../utils/helpers\";import\"./ProductItem.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductItem(item){var _useStoreContext=useStoreContext(),_useStoreContext2=_slicedToArray(_useStoreContext,2),state=_useStoreContext2[0],dispatch=_useStoreContext2[1];var image=item.image,name=item.name,_id=item._id,price=item.price,quantity=item.quantity;var cart=state.cart;var addToCart=function addToCart(){var itemInCart=cart.find(function(cartItem){return cartItem._id===_id;});if(itemInCart){dispatch({type:UPDATE_CART_QUANTITY,_id:_id,purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1});idbPromise('cart','put',_objectSpread(_objectSpread({},itemInCart),{},{purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1}));}else{dispatch({type:ADD_TO_CART,product:_objectSpread(_objectSpread({},item),{},{purchaseQuantity:1})});idbPromise('cart','put',_objectSpread(_objectSpread({},item),{},{purchaseQuantity:1}));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/products/\".concat(_id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"img-container\",children:/*#__PURE__*/_jsx(\"img\",{alt:name,src:\"/images/\".concat(image)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"product-name\",children:name}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-price\",children:[\"$\",price]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addToCart,className:\"add-to-cart-btn\",children:\"Add to cart\"})]});}export default ProductItem;","map":{"version":3,"names":["React","Link","pluralize","useStoreContext","ADD_TO_CART","UPDATE_CART_QUANTITY","idbPromise","jsx","_jsx","jsxs","_jsxs","ProductItem","item","_useStoreContext","_useStoreContext2","_slicedToArray","state","dispatch","image","name","_id","price","quantity","cart","addToCart","itemInCart","find","cartItem","type","purchaseQuantity","parseInt","_objectSpread","product","className","children","to","concat","alt","src","onClick"],"sources":["C:/Users/joshu/Desktop/project3/JACE/client/src/components/ProductItem/index.js"],"sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { pluralize } from \"../../utils/helpers\"\nimport { useStoreContext } from \"../../utils/GlobalState\";\nimport { ADD_TO_CART, UPDATE_CART_QUANTITY } from \"../../utils/actions\";\nimport { idbPromise } from \"../../utils/helpers\";\nimport \"./ProductItem.css\";\n\nfunction ProductItem(item) {\n  const [state, dispatch] = useStoreContext();\n\n  const {\n    image,\n    name,\n    _id,\n    price,\n    quantity\n  } = item;\n\n  const { cart } = state\n\n  const addToCart = () => {\n    const itemInCart = cart.find((cartItem) => cartItem._id === _id)\n    if (itemInCart) {\n      dispatch({\n        type: UPDATE_CART_QUANTITY,\n        _id: _id,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1\n      });\n      idbPromise('cart', 'put', {\n        ...itemInCart,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1\n      });\n    } else {\n      dispatch({\n        type: ADD_TO_CART,\n        product: { ...item, purchaseQuantity: 1 }\n      });\n      idbPromise('cart', 'put', { ...item, purchaseQuantity: 1 });\n    }\n  }\n\n  return (\n    <div className=\"card\">\n      <Link to={`/products/${_id}`}>\n        <div className=\"img-container\">\n          <img alt={name} src={`/images/${image}`} />\n        </div>\n        <div className=\"product-info\">\n          <p className=\"product-name\">{name}</p>\n          <p className=\"product-price\">${price}</p>\n        </div>\n      </Link>\n      <button onClick={addToCart} className=\"add-to-cart-btn\">\n        Add to cart\n      </button>\n    </div>\n  );  \n}\n\nexport default ProductItem;\n"],"mappings":"iQAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,SAAS,KAAQ,qBAAqB,CAC/C,OAASC,eAAe,KAAQ,yBAAyB,CACzD,OAASC,WAAW,CAAEC,oBAAoB,KAAQ,qBAAqB,CACvE,OAASC,UAAU,KAAQ,qBAAqB,CAChD,MAAO,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE3B,QAAS,CAAAC,WAAWA,CAACC,IAAI,CAAE,CACzB,IAAAC,gBAAA,CAA0BV,eAAe,EAAE,CAAAW,iBAAA,CAAAC,cAAA,CAAAF,gBAAA,IAApCG,KAAK,CAAAF,iBAAA,IAAEG,QAAQ,CAAAH,iBAAA,IAEtB,GACE,CAAAI,KAAK,CAKHN,IAAI,CALNM,KAAK,CACLC,IAAI,CAIFP,IAAI,CAJNO,IAAI,CACJC,GAAG,CAGDR,IAAI,CAHNQ,GAAG,CACHC,KAAK,CAEHT,IAAI,CAFNS,KAAK,CACLC,QAAQ,CACNV,IAAI,CADNU,QAAQ,CAGV,GAAQ,CAAAC,IAAI,CAAKP,KAAK,CAAdO,IAAI,CAEZ,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CACtB,GAAM,CAAAC,UAAU,CAAGF,IAAI,CAACG,IAAI,CAAC,SAACC,QAAQ,QAAK,CAAAA,QAAQ,CAACP,GAAG,GAAKA,GAAG,GAAC,CAChE,GAAIK,UAAU,CAAE,CACdR,QAAQ,CAAC,CACPW,IAAI,CAAEvB,oBAAoB,CAC1Be,GAAG,CAAEA,GAAG,CACRS,gBAAgB,CAAEC,QAAQ,CAACL,UAAU,CAACI,gBAAgB,CAAC,CAAG,CAC5D,CAAC,CAAC,CACFvB,UAAU,CAAC,MAAM,CAAE,KAAK,CAAAyB,aAAA,CAAAA,aAAA,IACnBN,UAAU,MACbI,gBAAgB,CAAEC,QAAQ,CAACL,UAAU,CAACI,gBAAgB,CAAC,CAAG,CAAC,GAC3D,CACJ,CAAC,IAAM,CACLZ,QAAQ,CAAC,CACPW,IAAI,CAAExB,WAAW,CACjB4B,OAAO,CAAAD,aAAA,CAAAA,aAAA,IAAOnB,IAAI,MAAEiB,gBAAgB,CAAE,CAAC,EACzC,CAAC,CAAC,CACFvB,UAAU,CAAC,MAAM,CAAE,KAAK,CAAAyB,aAAA,CAAAA,aAAA,IAAOnB,IAAI,MAAEiB,gBAAgB,CAAE,CAAC,GAAG,CAC7D,CACF,CAAC,CAED,mBACEnB,KAAA,QAAKuB,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBxB,KAAA,CAACT,IAAI,EAACkC,EAAE,cAAAC,MAAA,CAAehB,GAAG,CAAG,CAAAc,QAAA,eAC3B1B,IAAA,QAAKyB,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5B1B,IAAA,QAAK6B,GAAG,CAAElB,IAAK,CAACmB,GAAG,YAAAF,MAAA,CAAalB,KAAK,CAAG,EAAG,EACvC,cACNR,KAAA,QAAKuB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B1B,IAAA,MAAGyB,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEf,IAAI,EAAK,cACtCT,KAAA,MAAGuB,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,GAAC,CAACb,KAAK,GAAK,GACrC,GACD,cACPb,IAAA,WAAQ+B,OAAO,CAAEf,SAAU,CAACS,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAC,aAExD,EAAS,GACL,CAEV,CAEA,cAAe,CAAAvB,WAAW"},"metadata":{},"sourceType":"module"}