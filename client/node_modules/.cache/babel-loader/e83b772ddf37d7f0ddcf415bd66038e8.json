{"ast":null,"code":"import _objectSpread from\"/Users/estherchoi/UT-bootcamp/git-hub/jace-2/JACE/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/estherchoi/UT-bootcamp/git-hub/jace-2/JACE/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link,useParams}from'react-router-dom';import{useQuery}from'@apollo/client';import'./Detail.css';import Cart from'../components/Cart';import{useStoreContext}from'../utils/GlobalState';import{REMOVE_FROM_CART,UPDATE_CART_QUANTITY,ADD_TO_CART,UPDATE_PRODUCTS}from'../utils/actions';import{QUERY_PRODUCTS}from'../utils/queries';import{idbPromise}from'../utils/helpers';import spinner from'../assets/spinner.gif';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Detail(){var _useStoreContext=useStoreContext(),_useStoreContext2=_slicedToArray(_useStoreContext,2),state=_useStoreContext2[0],dispatch=_useStoreContext2[1];var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),currentProduct=_useState2[0],setCurrentProduct=_useState2[1];var _useQuery=useQuery(QUERY_PRODUCTS),loading=_useQuery.loading,data=_useQuery.data;var products=state.products,cart=state.cart;useEffect(function(){if(products.length){setCurrentProduct(products.find(function(product){return product._id===id;}));}else if(data){dispatch({type:UPDATE_PRODUCTS,products:data.products});data.products.forEach(function(product){idbPromise('products','put',product);});}else if(!loading){idbPromise('products','get').then(function(indexedProducts){dispatch({type:UPDATE_PRODUCTS,products:indexedProducts});});}},[products,data,loading,dispatch,id]);var addToCart=function addToCart(){var itemInCart=cart.find(function(cartItem){return cartItem._id===id;});if(itemInCart){dispatch({type:UPDATE_CART_QUANTITY,_id:id,purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1});idbPromise('cart','put',_objectSpread(_objectSpread({},itemInCart),{},{purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1}));}else{dispatch({type:ADD_TO_CART,product:_objectSpread(_objectSpread({},currentProduct),{},{purchaseQuantity:1})});idbPromise('cart','put',_objectSpread(_objectSpread({},currentProduct),{},{purchaseQuantity:1}));}};var removeFromCart=function removeFromCart(){dispatch({type:REMOVE_FROM_CART,_id:currentProduct._id});idbPromise('cart','delete',_objectSpread({},currentProduct));};return/*#__PURE__*/_jsxs(_Fragment,{children:[currentProduct&&cart?/*#__PURE__*/_jsxs(\"div\",{className:\"container my-1\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"links-to-go\",children:\"\\u2190 Back to Products \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:/*#__PURE__*/_jsx(\"img\",{className:\"product-image\",src:\"/images/\".concat(currentProduct.image),alt:currentProduct.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"product-name\",children:currentProduct.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-price\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\"$\",currentProduct.price]}),/*#__PURE__*/_jsx(\"p\",{className:\"product-description\",children:currentProduct.description})]})]})]}):null,loading?/*#__PURE__*/_jsx(\"img\",{src:spinner,alt:\"loading\"}):null]});}export default Detail;","map":{"version":3,"names":["React","useEffect","useState","Link","useParams","useQuery","Cart","useStoreContext","REMOVE_FROM_CART","UPDATE_CART_QUANTITY","ADD_TO_CART","UPDATE_PRODUCTS","QUERY_PRODUCTS","idbPromise","spinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Detail","_useStoreContext","_useStoreContext2","_slicedToArray","state","dispatch","_useParams","id","_useState","_useState2","currentProduct","setCurrentProduct","_useQuery","loading","data","products","cart","length","find","product","_id","type","forEach","then","indexedProducts","addToCart","itemInCart","cartItem","purchaseQuantity","parseInt","_objectSpread","removeFromCart","children","className","to","src","concat","image","alt","name","price","description"],"sources":["/Users/estherchoi/UT-bootcamp/git-hub/jace-2/JACE/client/src/pages/MenuDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { useQuery } from '@apollo/client';\nimport './Detail.css';\n\nimport Cart from '../components/Cart';\nimport { useStoreContext } from '../utils/GlobalState';\nimport {\n  REMOVE_FROM_CART,\n  UPDATE_CART_QUANTITY,\n  ADD_TO_CART,\n  UPDATE_PRODUCTS,\n} from '../utils/actions';\nimport { QUERY_PRODUCTS } from '../utils/queries';\nimport { idbPromise } from '../utils/helpers';\nimport spinner from '../assets/spinner.gif';\n\nfunction Detail() {\n  const [state, dispatch] = useStoreContext();\n  const { id } = useParams();\n\n  const [currentProduct, setCurrentProduct] = useState({});\n\n  const { loading, data } = useQuery(QUERY_PRODUCTS);\n\n  const { products, cart } = state;\n\n  useEffect(() => {\n    if (products.length) {\n      setCurrentProduct(products.find((product) => product._id === id));\n    }\n\n    else if (data) {\n      dispatch({\n        type: UPDATE_PRODUCTS,\n        products: data.products,\n      });\n\n      data.products.forEach((product) => {\n        idbPromise('products', 'put', product);\n      });\n    }\n\n    else if (!loading) {\n      idbPromise('products', 'get').then((indexedProducts) => {\n        dispatch({\n          type: UPDATE_PRODUCTS,\n          products: indexedProducts,\n        });\n      });\n    }\n  }, [products, data, loading, dispatch, id]);\n\n  const addToCart = () => {\n    const itemInCart = cart.find((cartItem) => cartItem._id === id);\n    if (itemInCart) {\n      dispatch({\n        type: UPDATE_CART_QUANTITY,\n        _id: id,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1,\n      });\n      idbPromise('cart', 'put', {\n        ...itemInCart,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1,\n      });\n    } else {\n      dispatch({\n        type: ADD_TO_CART,\n        product: { ...currentProduct, purchaseQuantity: 1 },\n      });\n      idbPromise('cart', 'put', { ...currentProduct, purchaseQuantity: 1 });\n    }\n  };\n\n  const removeFromCart = () => {\n    dispatch({\n      type: REMOVE_FROM_CART,\n      _id: currentProduct._id,\n    });\n\n    idbPromise('cart', 'delete', { ...currentProduct });\n  };\n\n  return (\n    <>\n      {currentProduct && cart ? (\n        <div className=\"container my-1\">\n          <Link to=\"/\" className=\"links-to-go\">‚Üê Back to Products </Link>\n          <div className=\"detail-container\">\n            <div className=\"image-container\">\n              <img\n                className=\"product-image\"\n                src={`/images/${currentProduct.image}`}\n                alt={currentProduct.name}\n              />\n            </div>\n\n            <div className=\"actions\">\n              <h2 className=\"product-name\">{currentProduct.name}</h2>\n              <p className=\"product-price\">\n                <strong>Price:</strong>${currentProduct.price}\n              </p>\n              <p className=\"product-description\">{currentProduct.description}</p>\n            </div>\n          </div>\n        </div>\n      ) : null}\n      {loading ? <img src={spinner} alt=\"loading\" /> : null}\n\n    </>\n  );\n\n}\n\nexport default Detail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}