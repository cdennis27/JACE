{"ast":null,"code":"var _jsxFileName = \"/Users/tonyoffor/Documents/Finalproject/JACE/client/src/components/Menu/index.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport MenuItems from '../MenuItems';\nimport menuData from '../../pages/menuData';\nimport { useStoreContext } from '../../utils/GlobalState';\nimport { UPDATE_PRODUCTS } from '../../utils/actions';\nimport { useQuery } from '@apollo/client';\nimport { QUERY_PRODUCTS } from '../../utils/queries';\nimport { idbPromise } from '../../utils/helpers';\nimport spinner from '../../assets/spinner.gif';\nimport { jsPDF } from \"jspdf\";\nimport 'jspdf-autotable';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductList() {\n  _s();\n  const [state, dispatch] = useStoreContext();\n  const {\n    currentCategory\n  } = state;\n  const {\n    loading,\n    data\n  } = useQuery(QUERY_PRODUCTS);\n  console.log(data);\n  useEffect(() => {\n    if (data) {\n      dispatch({\n        type: UPDATE_PRODUCTS,\n        products: data.products\n      });\n      data.products.forEach(product => {\n        idbPromise('products', 'put', product);\n      });\n    } else if (!loading) {\n      idbPromise('products', 'get').then(products => {\n        dispatch({\n          type: UPDATE_PRODUCTS,\n          products: products\n        });\n      });\n    }\n  }, [data, loading, dispatch]);\n  function filterProducts() {\n    if (!currentCategory) {\n      return state.products;\n    }\n    return state.products.filter(product => product.category._id === currentCategory);\n  }\n  const handleDownloadMenu = () => {\n    const doc = new jsPDF();\n    const heading = 'Menu';\n    const textWidth = doc.getStringUnitWidth(heading) * doc.internal.getFontSize() / doc.internal.scaleFactor;\n\n    // Get page width and set x position for the heading\n    const pageWidth = doc.internal.pageSize.width;\n    const x = (pageWidth - textWidth) / 2;\n    doc.text(heading, x, 10);\n    doc.autoTable({\n      head: [['Name', 'Description', 'Price']],\n      body: menuData.map(_ref => {\n        let {\n          name,\n          description,\n          price\n        } = _ref;\n        return [name, description, price];\n      })\n    });\n    doc.save(\"menu.pdf\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"my-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Our Products:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), state.products.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-row\",\n      children: filterProducts().map(product => /*#__PURE__*/_jsxDEV(MenuItems, {\n        _id: product._id,\n        image: product.image,\n        name: product.name,\n        price: product.price,\n        quantity: product.quantity\n      }, product._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"You haven't added any products yet!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleDownloadMenu,\n      children: \"Download Menu\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: spinner,\n      alt: \"loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 18\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductList, \"5EFEb9FYc1KGyEUAmLNh5IMPtTo=\", false, function () {\n  return [useStoreContext, useQuery];\n});\n_c = ProductList;\nexport default ProductList;\nvar _c;\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useEffect","MenuItems","menuData","useStoreContext","UPDATE_PRODUCTS","useQuery","QUERY_PRODUCTS","idbPromise","spinner","jsPDF","jsxDEV","_jsxDEV","ProductList","_s","state","dispatch","currentCategory","loading","data","console","log","type","products","forEach","product","then","filterProducts","filter","category","_id","handleDownloadMenu","doc","heading","textWidth","getStringUnitWidth","internal","getFontSize","scaleFactor","pageWidth","pageSize","width","x","text","autoTable","head","body","map","_ref","name","description","price","save","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","image","quantity","onClick","src","alt","_c","$RefreshReg$"],"sources":["/Users/tonyoffor/Documents/Finalproject/JACE/client/src/components/Menu/index.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport MenuItems from '../MenuItems';\nimport menuData from '../../pages/menuData';\nimport { useStoreContext } from '../../utils/GlobalState';\nimport { UPDATE_PRODUCTS } from '../../utils/actions';\nimport { useQuery } from '@apollo/client';\nimport { QUERY_PRODUCTS } from '../../utils/queries';\nimport { idbPromise } from '../../utils/helpers';\nimport spinner from '../../assets/spinner.gif';\nimport { jsPDF } from \"jspdf\";\nimport 'jspdf-autotable';\n\nfunction ProductList() {\n  const [state, dispatch] = useStoreContext();\n\n  const { currentCategory } = state;\n\n  const { loading, data } = useQuery(QUERY_PRODUCTS);\nconsole.log(data);\n\n  useEffect(() => {\n    if (data) {\n      dispatch({\n        type: UPDATE_PRODUCTS,\n        products: data.products,\n      });\n      data.products.forEach((product) => {\n        idbPromise('products', 'put', product);\n      });\n    } else if (!loading) {\n      idbPromise('products', 'get').then((products) => {\n        dispatch({\n          type: UPDATE_PRODUCTS,\n          products: products,\n        });\n      });\n    }\n  }, [data, loading, dispatch]);\n\n  function filterProducts() {\n    if (!currentCategory) {\n      return state.products;\n    }\n\n    return state.products.filter(\n      (product) => product.category._id === currentCategory\n    );\n  }\n\n  const handleDownloadMenu = () => {\n    const doc = new jsPDF();\n    const heading = 'Menu';\n    const textWidth = doc.getStringUnitWidth(heading) * doc.internal.getFontSize() / doc.internal.scaleFactor;\n\n    // Get page width and set x position for the heading\n    const pageWidth = doc.internal.pageSize.width;\n    const x = (pageWidth - textWidth) / 2;\n    doc.text(heading, x, 10);\n    doc.autoTable({\n      head: [['Name', 'Description', 'Price']],\n      body: menuData.map(({ name, description, price }) => [name, description, price])\n    });\n    doc.save(\"menu.pdf\");\n  };\n\n\n\n  return (\n    <div className=\"my-2\">\n      <h2>Our Products:</h2>\n      {state.products.length ? (\n        <div className=\"flex-row\">\n          {filterProducts().map((product) => (\n            <MenuItems\n              key={product._id}\n              _id={product._id}\n              image={product.image}\n              name={product.name}\n              price={product.price}\n              quantity={product.quantity}\n            />\n          ))}\n        </div>\n      ) : (\n        <h3>You haven't added any products yet!</h3>\n      )}\n      <button onClick={handleDownloadMenu}>\n        Download Menu\n      </button>\n      {loading ? <img src={spinner} alt=\"loading\" /> : null}\n    </div>\n  );\n}\n\nexport default ProductList;\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}